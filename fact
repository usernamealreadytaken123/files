section .data
    len equ 255
    mul_sign db '*'
    one db '1'
    null db '0'



    
    
section .bss
    num resb len
    outp resb 1

section .text
global _start






Factor:
    cmp eax, 1
    je .return
    mov esi, eax
    xor edx, edx

    div ebx
    cmp edx, 0
    je .true

    mov eax, esi
    inc ebx
    jmp Factorize

    .true:
        call Print_factor
        mov ebx, 2
        jmp Factorize

    .return:
        ret

Print_factor:
    xor esi, esi
    push eax
    xor eax, eax
    mov eax, ebx
    xor ebx, ebx

    mov ebp, esp
    xor ecx, ecx

    .factor:
        mov ebx, 10
        div ebx ;
        add edx, '0'
        push edx ;
        xor edx, edx
        inc esi
        cmp eax, 0
        jne .factor

    .output:
        pop edx
        mov [outp], dl

        mov eax, 4
        mov ebx, 1
        mov ecx, outp
        mov edx, 1
        int 80h

        dec esi
        cmp esi, 0
        jne .output

        ;выводит знак умножения
        .sign:
            mov eax, 4
            mov ebx, 1
            mov ecx, mul_sign
            mov edx, 1
            int 80h
            
        mov esp, ebp
        pop eax

        ret

_start:
    mov eax, 3 
    mov ebx, 0
    mov ecx, num
    mov edx, len
    int 80h

    dec eax 
    xor edx,edx

    mov ecx, eax 
    call Get_digit

    cmp eax, 0 
    je Null

    mov ebx, 2 
    call Factor

    mov eax, 4
    mov ebx, 1
    mov ecx, one
    mov edx, 1
    int 80h

    mov eax, 1
    mov ebx, 0
    int 80h
